GriklorSleet

Import Code:

cmV0dXJuIHsKIGxvYWQgPSB7CiAgYWx3YXlzID0gZmFsc2UsCiAgY2xhc3MgPSAiIiwKICB6b25lID0gIiIsCiB9LAogY29kZSA9ICJiRzlqWVd3Z2JYRWdQU0J5WlhGMWFYSmxLQ2R0Y1NjcENteHZZMkZzSUc5eklEMGdjbVZ4ZFdseVpTZ25iM01uS1Fwc2IyTmhiQ0J0ZVY5amJHRnpjeUE5SUcxeExsUk1UeTVOWlM1RGJHRnpjeTVUYUc5eWRFNWhiV1VvS1FvS2JHOWpZV3dnWm5WdVkzUnBiMjRnWW5Ka1lXTjBhVzl1S0NrS0lDQWdJRzF4TG1OdFpDZ25MMkp2ZUhJZ1VHRjFjMlVuS1FvZ0lDQWdiWEV1WTIxa0tDY3ZZWFIwWVdOcklHOW1aaWNwQ2lBZ0lDQnRjUzVqYldRb0p5OXJaWGx3Y21WemN5QmxjMk1uS1FvZ0lDQWdiWEV1WkdWc1lYa29NVEFwQ2lBZ0lDQnRjUzVqYldRb0p5OTBkMmx6ZENCemRHOXdKeWtLSUNBZ0lHMXhMbU50WkNnbkwyNWhkaUJ6Y0dGM2JpQkNaWFJvZFc0bktRb2dJQ0FnYkc5allXd2djM1JoY25SVWFXMWxJRDBnYjNNdWRHbHRaU2dwQ2lBZ0lDQjNhR2xzWlNCdmN5NTBhVzFsS0NrZ0xTQnpkR0Z5ZEZScGJXVWdQRDBnTXlCa2J3b2dJQ0FnSUNBZ0lHbG1JRzV2ZENCdGNTNVVURTh1VFdVdVRXOTJhVzVuS0NrZ1lXNWtJRzF4TGxSTVR5NVRjR0YzYmlnblFtVjBhSFZ1SnlrdVJHbHpkR0Z1WTJVb0tTQThJREl3SUhSb1pXNEtJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2WW05NGNpQlZibkJoZFhObEp5a0tJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2WW05NGNpQkRZVzF3SnlrS0lDQWdJQ0FnSUNBZ0lDQWdiWEV1WTIxa0tDY3ZkSGRwYzNRZ2MzUmhjblFuS1FvZ0lDQWdJQ0FnSUdWdVpBb2dJQ0FnSUNBZ0lHbG1JRzF4TGxSTVR5NVRjR0YzYmlnblFtVjBhSFZ1SnlrdVJHbHpkR0Z1WTJVb0tTQStJREl3SUhSb1pXNEtJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2Ym1GMklITndZWGR1SUVKbGRHaDFiaWNwQ2lBZ0lDQWdJQ0FnWlc1a0NpQWdJQ0FnSUNBZ2JYRXVaR1ZzWVhrb01UQXdLUW9nSUNBZ1pXNWtDbVZ1WkFvS2JHOWpZV3dnWm5WdVkzUnBiMjRnYTJGaFkzUnBiMjRvS1FvZ0lDQWdiWEV1WTIxa0tDY3ZZbTk0Y2lCUVlYVnpaU2NwQ2lBZ0lDQnRjUzVqYldRb0p5OWhkSFJoWTJzZ2IyWm1KeWtLSUNBZ0lHMXhMbU50WkNnbkwydGxlWEJ5WlhOeklHVnpZeWNwQ2lBZ0lDQnRjUzVrWld4aGVTZ3hNQ2tLSUNBZ0lHMXhMbU50WkNnbkwyNWhkaUJ6Y0dGM2JpQkNaWFJvZFc0bktRb2dJQ0FnYkc5allXd2djM1JoY25SVWFXMWxJRDBnYjNNdWRHbHRaU2dwQ2lBZ0lDQjNhR2xzWlNCdmN5NTBhVzFsS0NrZ0xTQnpkR0Z5ZEZScGJXVWdQRDBnTXlCa2J3b2dJQ0FnSUNBZ0lHbG1JRzV2ZENCdGNTNVVURTh1VFdVdVRXOTJhVzVuS0NrZ1lXNWtJRzF4TGxSTVR5NVRjR0YzYmlnblFtVjBhSFZ1SnlrdVJHbHpkR0Z1WTJVb0tTQThJREl3SUhSb1pXNEtJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2WW05NGNpQlZibkJoZFhObEp5a0tJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2WW05NGNpQkRZVzF3SnlrS0lDQWdJQ0FnSUNCbGJtUUtJQ0FnSUNBZ0lDQnBaaUJ0Y1M1VVRFOHVVM0JoZDI0b0owSmxkR2gxYmljcExrUnBjM1JoYm1ObEtDa2dQaUF5TUNCMGFHVnVDaUFnSUNBZ0lDQWdJQ0FnSUcxeExtTnRaQ2duTDI1aGRpQnpjR0YzYmlCQ1pYUm9kVzRuS1FvZ0lDQWdJQ0FnSUdWdVpBb2dJQ0FnSUNBZ0lHMXhMbVJsYkdGNUtERXdNQ2tLSUNBZ0lHVnVaQXBsYm1RS0NteHZZMkZzSUdaMWJtTjBhVzl1SUhSaGJtdGhZM1JwYjI0b0tRb2dJQ0FnYlhFdVkyMWtLQ2N2WTNkMGJuTWdiVzlrWlNBM0p5a0tJQ0FnSUcxeExtTnRaQ2duTDI1aGRpQnpjR0YzYmlCQ1pYUm9kVzRuS1FvZ0lDQWdiRzlqWVd3Z2MzUmhjblJVYVcxbElEMGdiM011ZEdsdFpTZ3BDaUFnSUNCM2FHbHNaU0J2Y3k1MGFXMWxLQ2tnTFNCemRHRnlkRlJwYldVZ1BEMGdNeUJrYndvZ0lDQWdJQ0FnSUdsbUlHNXZkQ0J0Y1M1VVRFOHVUV1V1VFc5MmFXNW5LQ2tnWVc1a0lHMXhMbFJNVHk1VGNHRjNiaWduUW1WMGFIVnVKeWt1UkdsemRHRnVZMlVvS1NBOElESXdJSFJvWlc0S0lDQWdJQ0FnSUNBZ0lDQWdiWEV1WTIxa0tDY3ZZbTk0Y2lCRFlXMXdKeWtLSUNBZ0lDQWdJQ0FnSUNBZ2JYRXVZMjFrS0NjdlkzZDBibk1nYlc5a1pTQTNKeWtLSUNBZ0lDQWdJQ0FnSUNBZ2JYRXVaR1ZzWVhrb01UQXBDaUFnSUNBZ0lDQWdJQ0FnSUcxeExtTnRaQ2duTDJOM2RHNXpJSEpsYzJWMFkyRnRjQ2NwQ2lBZ0lDQWdJQ0FnWlc1a0NpQWdJQ0FnSUNBZ2FXWWdiWEV1VkV4UExsTndZWGR1S0NkQ1pYUm9kVzRuS1M1RWFYTjBZVzVqWlNncElENGdNakFnZEdobGJnb2dJQ0FnSUNBZ0lDQWdJQ0J0Y1M1amJXUW9KeTl1WVhZZ2MzQmhkMjRnUW1WMGFIVnVKeWtLSUNBZ0lDQWdJQ0JsYm1RS0lDQWdJQ0FnSUNCdGNTNWtaV3hoZVNneE1EQXBDaUFnSUNCbGJtUUtaVzVrQ2dwc2IyTmhiQ0JtZFc1amRHbHZiaUJqZDNSdVlXTjBhVzl1S0NrS0lDQWdJRzF4TG1OdFpDZ25MMkp2ZUhJZ1VHRjFjMlVuS1FvZ0lDQWdiWEV1WTIxa0tDY3ZZM2QwYm5NZ2JXOWtaU0F3SnlrS0lDQWdJRzF4TG1OdFpDZ25MMkYwZEdGamF5QnZabVluS1FvZ0lDQWdiWEV1WTIxa0tDY3ZhMlY1Y0hKbGMzTWdaWE5qSnlrS0lDQWdJRzF4TG1OdFpDZ25MMjVoZGlCemNHRjNiaUJDWlhSb2RXNG5LUW9nSUNBZ2JHOWpZV3dnYzNSaGNuUlVhVzFsSUQwZ2IzTXVkR2x0WlNncENpQWdJQ0IzYUdsc1pTQnZjeTUwYVcxbEtDa2dMU0J6ZEdGeWRGUnBiV1VnUEQwZ015Qmtid29nSUNBZ0lDQWdJR2xtSUc1dmRDQnRjUzVVVEU4dVRXVXVUVzkyYVc1bktDa2dZVzVrSUcxeExsUk1UeTVUY0dGM2JpZ25RbVYwYUhWdUp5a3VSR2x6ZEdGdVkyVW9LU0E4SURJd0lIUm9aVzRLSUNBZ0lDQWdJQ0FnSUNBZ2JYRXVZMjFrS0NjdlltOTRjaUJWYm5CaGRYTmxKeWtLSUNBZ0lDQWdJQ0FnSUNBZ2JYRXVZMjFrS0NjdlltOTRjaUJEWVcxd0p5a0tJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2WTNkMGJuTWdiVzlrWlNBeEp5a0tJQ0FnSUNBZ0lDQmxibVFLSUNBZ0lDQWdJQ0JwWmlCdGNTNVVURTh1VTNCaGQyNG9KMEpsZEdoMWJpY3BMa1JwYzNSaGJtTmxLQ2tnUGlBeU1DQjBhR1Z1Q2lBZ0lDQWdJQ0FnSUNBZ0lHMXhMbU50WkNnbkwyNWhkaUJ6Y0dGM2JpQkNaWFJvZFc0bktRb2dJQ0FnSUNBZ0lHVnVaQW9nSUNBZ0lDQWdJRzF4TG1SbGJHRjVLREV3TUNrS0lDQWdJR1Z1WkFwbGJtUUtDbXh2WTJGc0lHWjFibU4wYVc5dUlHaGxZV3hoWTNScGIyNG9LUW9nSUNBZ2JYRXVZMjFrS0NjdlkzZDBibk1nYlc5a1pTQXdKeWtLSUNBZ0lHMXhMbU50WkNnbkwyRjBkR0ZqYXlCdlptWW5LUW9nSUNBZ2JYRXVZMjFrS0NjdmEyVjVjSEpsYzNNZ1pYTmpKeWtLSUNBZ0lHMXhMbU50WkNnbkwyNWhkaUJ6Y0dGM2JpQkNaWFJvZFc0bktRb2dJQ0FnYkc5allXd2djM1JoY25SVWFXMWxJRDBnYjNNdWRHbHRaU2dwQ2lBZ0lDQjNhR2xzWlNCdmN5NTBhVzFsS0NrZ0xTQnpkR0Z5ZEZScGJXVWdQRDBnTXlCa2J3b2dJQ0FnSUNBZ0lHbG1JRzV2ZENCdGNTNVVURTh1VFdVdVRXOTJhVzVuS0NrZ1lXNWtJRzF4TGxSTVR5NVRjR0YzYmlnblFtVjBhSFZ1SnlrdVJHbHpkR0Z1WTJVb0tTQThJREl3SUhSb1pXNEtJQ0FnSUNBZ0lDQWdJQ0FnYlhFdVkyMWtLQ2N2WW05NGNpQkRZVzF3SnlrS0lDQWdJQ0FnSUNBZ0lDQWdiWEV1WTIxa0tDY3ZZM2QwYm5NZ2JXOWtaU0F4SnlrS0lDQWdJQ0FnSUNCbGJtUUtJQ0FnSUNBZ0lDQnBaaUJ0Y1M1VVRFOHVVM0JoZDI0b0owSmxkR2gxYmljcExrUnBjM1JoYm1ObEtDa2dQaUF5TUNCMGFHVnVDaUFnSUNBZ0lDQWdJQ0FnSUcxeExtTnRaQ2duTDI1aGRpQnpjR0YzYmlCQ1pYUm9kVzRuS1FvZ0lDQWdJQ0FnSUdWdVpBb2dJQ0FnSUNBZ0lHMXhMbVJsYkdGNUtERXdNQ2tLSUNBZ0lHVnVaQXBsYm1RS0NncHNiMk5oYkNCaFkzUnBiMjV6SUQwZ2V3b2dJQ0FnUWxKRUlEMGdZbkprWVdOMGFXOXVMQW9nSUNBZ1VrNUhJRDBnYTJGaFkzUnBiMjRzQ2lBZ0lDQlhTVm9nUFNCcllXRmpkR2x2Yml3S0lDQWdJRkJCVENBOUlIUmhibXRoWTNScGIyNHNDaUFnSUNCVFNFUWdQU0IwWVc1cllXTjBhVzl1TEFvZ0lDQWdWMEZTSUQwZ2RHRnVhMkZqZEdsdmJpd0tJQ0FnSUVKRlVpQTlJR04zZEc1aFkzUnBiMjRzQ2lBZ0lDQkNVMVFnUFNCamQzUnVZV04wYVc5dUxBb2dJQ0FnUlU1RElEMGdZM2QwYm1GamRHbHZiaXdLSUNBZ0lFMUJSeUE5SUdOM2RHNWhZM1JwYjI0c0NpQWdJQ0JOVGtzZ1BTQmpkM1J1WVdOMGFXOXVMQW9nSUNBZ1RrVkRJRDBnWTNkMGJtRmpkR2x2Yml3S0lDQWdJRkpQUnlBOUlHTjNkRzVoWTNScGIyNHNDaUFnSUNCRFRGSWdQU0JvWldGc1lXTjBhVzl1TEFvZ0lDQWdVMGhOSUQwZ2FHVmhiR0ZqZEdsdmJpd0tJQ0FnSUVSU1ZTQTlJR3RoWVdOMGFXOXVMQXA5Q2dwc2IyTmhiQ0JtZFc1amRHbHZiaUJsZG1WdWRGOW9ZVzVrYkdWeUtDa0tJQ0FnSUhKbGRIVnliaUJoWTNScGIyNXpXMjE1WDJOc1lYTnpYU2dwQ21WdVpBb0tjbVYwZFhKdUlIdGxkbVZ1ZEdaMWJtTTlaWFpsYm5SZmFHRnVaR3hsY24wPSIsCiBjYXRlZ29yeSA9ICJUb1YiLAogdHlwZSA9ICJldmVudHMiLAogbmFtZSA9ICJHcmlrbG9yU2xlZXQiLAogcGF0dGVybiA9ICIjKiNHYXRoZXIhIFRoaXMgZmlyZSBzaG91bGQgcHJvdGVjdCB5b3UgZnJvbSB0aGUgc2xlZXQhIyojIiwKfQ==

Actual Code:

local mq = require('mq')
local os = require('os')
local my_class = mq.TLO.Me.Class.ShortName()

local function brdaction()
    mq.cmd('/boxr Pause')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
    mq.delay(10)
    mq.cmd('/twist stop')
    mq.cmd('/nav spawn Bethun')
    local startTime = os.time()
    while os.time() - startTime <= 3 do
        if not mq.TLO.Me.Moving() and mq.TLO.Spawn('Bethun').Distance() < 20 then
            mq.cmd('/boxr Unpause')
            mq.cmd('/boxr Camp')
            mq.cmd('/twist start')
        end
        if mq.TLO.Spawn('Bethun').Distance() > 20 then
            mq.cmd('/nav spawn Bethun')
        end
        mq.delay(100)
    end
end

local function kaaction()
    mq.cmd('/boxr Pause')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
    mq.delay(10)
    mq.cmd('/nav spawn Bethun')
    local startTime = os.time()
    while os.time() - startTime <= 3 do
        if not mq.TLO.Me.Moving() and mq.TLO.Spawn('Bethun').Distance() < 20 then
            mq.cmd('/boxr Unpause')
            mq.cmd('/boxr Camp')
        end
        if mq.TLO.Spawn('Bethun').Distance() > 20 then
            mq.cmd('/nav spawn Bethun')
        end
        mq.delay(100)
    end
end

local function tankaction()
    mq.cmd('/cwtns mode 7')
    mq.cmd('/nav spawn Bethun')
    local startTime = os.time()
    while os.time() - startTime <= 3 do
        if not mq.TLO.Me.Moving() and mq.TLO.Spawn('Bethun').Distance() < 20 then
            mq.cmd('/boxr Camp')
            mq.cmd('/cwtns mode 7')
            mq.delay(10)
            mq.cmd('/cwtns resetcamp')
        end
        if mq.TLO.Spawn('Bethun').Distance() > 20 then
            mq.cmd('/nav spawn Bethun')
        end
        mq.delay(100)
    end
end

local function cwtnaction()
    mq.cmd('/boxr Pause')
    mq.cmd('/cwtns mode 0')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
    mq.cmd('/nav spawn Bethun')
    local startTime = os.time()
    while os.time() - startTime <= 3 do
        if not mq.TLO.Me.Moving() and mq.TLO.Spawn('Bethun').Distance() < 20 then
            mq.cmd('/boxr Unpause')
            mq.cmd('/boxr Camp')
            mq.cmd('/cwtns mode 1')
        end
        if mq.TLO.Spawn('Bethun').Distance() > 20 then
            mq.cmd('/nav spawn Bethun')
        end
        mq.delay(100)
    end
end

local function healaction()
    mq.cmd('/cwtns mode 0')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
    mq.cmd('/nav spawn Bethun')
    local startTime = os.time()
    while os.time() - startTime <= 3 do
        if not mq.TLO.Me.Moving() and mq.TLO.Spawn('Bethun').Distance() < 20 then
            mq.cmd('/boxr Camp')
            mq.cmd('/cwtns mode 1')
        end
        if mq.TLO.Spawn('Bethun').Distance() > 20 then
            mq.cmd('/nav spawn Bethun')
        end
        mq.delay(100)
    end
end


local actions = {
    BRD = brdaction,
    RNG = kaaction,
    WIZ = kaaction,
    PAL = tankaction,
    SHD = tankaction,
    WAR = tankaction,
    BER = cwtnaction,
    BST = cwtnaction,
    ENC = cwtnaction,
    MAG = cwtnaction,
    MNK = cwtnaction,
    NEC = cwtnaction,
    ROG = cwtnaction,
    CLR = healaction,
    SHM = healaction,
    DRU = kaaction,
}

local function event_handler()
    return actions[my_class]()
end

return {eventfunc=event_handler}