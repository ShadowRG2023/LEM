Narandi Shatters

Import Code:

cmV0dXJuIHsKIGxvYWQgPSB7CiAgYWx3YXlzID0gZmFsc2UsCiAgY2xhc3MgPSAiIiwKICB6b25lID0gIiIsCiB9LAogY29kZSA9ICJiRzlqWVd3Z2JYRWdQU0J5WlhGMWFYSmxLQ2R0Y1NjcENncHNiMk5oYkNCdGVWOWpiR0Z6Y3lBOUlHMXhMbFJNVHk1TlpTNURiR0Z6Y3k1VGFHOXlkRTVoYldVb0tRb0tiRzlqWVd3Z1puVnVZM1JwYjI0Z1luSmtZV04wYVc5dUtDa0tJQ0FnSUcxeExtTnRaQ2duTDJSbmRDQkpJR0Z0SUVKU1JDQlRkRzl3Y0dsdVp5QkJkSFJoWTJzaEp5a0tJQ0FnSUcxeExtTnRaQ2duTDJKdmVISWdVR0YxYzJVbktRb2dJQ0FnYlhFdVkyMWtLQ2N2WVhSMFlXTnJJRzltWmljcENpQWdJQ0J0Y1M1amJXUW9KeTlyWlhsd2NtVnpjeUJsYzJNbktRb2dJQ0FnYlhFdVpHVnNZWGtvTXpBcENpQWdJQ0J0Y1M1amJXUW9KeTkwZDJsemRDQnpkRzl3SnlrS1pXNWtDZ3BzYjJOaGJDQm1kVzVqZEdsdmJpQnJZV0ZqZEdsdmJpZ3BDaUFnSUNCdGNTNWpiV1FvSnk5a1ozUWdTU0JoYlNCTFFTQlViMjl1SUZOMGIzQndhVzVuSUVGMGRHRmpheUVuS1FvZ0lDQWdiWEV1WTIxa0tDY3ZZbTk0Y2lCUVlYVnpaU2NwQ2lBZ0lDQnRjUzVqYldRb0p5OWhkSFJoWTJzZ2IyWm1KeWtLSUNBZ0lHMXhMbU50WkNnbkwydGxlWEJ5WlhOeklHVnpZeWNwQ21WdVpBb0tiRzlqWVd3Z1puVnVZM1JwYjI0Z2RHRnVhMkZqZEdsdmJpZ3BDaUFnSUNCdGNTNWpiV1FvSnk5a1ozUWdTU0JoYlNCTllXNTFZV3dnVkdGdWEybHVaeUVuS1FvZ0lDQWdiWEV1WTIxa0tDY3ZZM2QwYm5NZ2JXOWtaU0F3SnlrS0lDQWdJRzF4TG1OdFpDZ25MMkYwZEdGamF5QnZabVluS1FvZ0lDQWdiWEV1WTIxa0tDY3ZhMlY1Y0hKbGMzTWdaWE5qSnlrS1pXNWtDZ3BzYjJOaGJDQm1kVzVqZEdsdmJpQmpkM1J1WVdOMGFXOXVLQ2tLSUNBZ0lHMXhMbU50WkNnbkwyUm5kQ0JKSUdGdElFTlhWRTRnVTNSdmNIQnBibWNnUVhSMFlXTnJJU2NwQ2lBZ0lDQnRjUzVqYldRb0p5OWliM2h5SUZCaGRYTmxKeWtLSUNBZ0lHMXhMbU50WkNnbkwyTjNkRzV6SUcxdlpHVWdNQ2NwQ2lBZ0lDQnRjUzVqYldRb0p5OWhkSFJoWTJzZ2IyWm1KeWtLSUNBZ0lHMXhMbU50WkNnbkwydGxlWEJ5WlhOeklHVnpZeWNwQ21WdVpBb0tiRzlqWVd3Z1lXTjBhVzl1Y3lBOUlIc0tJQ0FnSUVKU1JDQTlJR0p5WkdGamRHbHZiaXdLSUNBZ0lGSk9SeUE5SUd0aFlXTjBhVzl1TEFvZ0lDQWdWMGxhSUQwZ2EyRmhZM1JwYjI0c0NpQWdJQ0JRUVV3Z1BTQjBZVzVyWVdOMGFXOXVMQW9nSUNBZ1UwaEVJRDBnZEdGdWEyRmpkR2x2Yml3S0lDQWdJRmRCVWlBOUlIUmhibXRoWTNScGIyNHNDaUFnSUNCQ1JWSWdQU0JqZDNSdVlXTjBhVzl1TEFvZ0lDQWdRbE5VSUQwZ1kzZDBibUZqZEdsdmJpd0tJQ0FnSUVWT1F5QTlJR04zZEc1aFkzUnBiMjRzQ2lBZ0lDQk5RVWNnUFNCamQzUnVZV04wYVc5dUxBb2dJQ0FnVFU1TElEMGdZM2QwYm1GamRHbHZiaXdLSUNBZ0lFNUZReUE5SUdOM2RHNWhZM1JwYjI0c0NpQWdJQ0JTVDBjZ1BTQmpkM1J1WVdOMGFXOXVMQ0FnSUNBZ0lDQUtmUW9LYkc5allXd2dablZ1WTNScGIyNGdaWFpsYm5SZmFHRnVaR3hsY2lncENpQWdJQ0J5WlhSMWNtNGdZV04wYVc5dWMxdHRlVjlqYkdGemMxMG9LUXBsYm1RS0NuSmxkSFZ5YmlCN1pYWmxiblJtZFc1alBXVjJaVzUwWDJoaGJtUnNaWEo5Q2c9PSIsCiBjYXRlZ29yeSA9ICJUb1YiLAogdHlwZSA9ICJldmVudHMiLAogbmFtZSA9ICJOYXJhbmRpIFNoYXR0ZXJzIiwKIHBhdHRlcm4gPSAiIyojTmFyYW5kaSBhcHBlYXJzIHRvIHNoYXR0ZXIjKiMiLAp9

Actual Code:

local mq = require('mq')

local my_class = mq.TLO.Me.Class.ShortName()

local function brdaction()
    mq.cmd('/dgt I am BRD Stopping Attack!')
    mq.cmd('/boxr Pause')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
    mq.delay(30)
    mq.cmd('/twist stop')
end

local function kaaction()
    mq.cmd('/dgt I am KA Toon Stopping Attack!')
    mq.cmd('/boxr Pause')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
end

local function tankaction()
    mq.cmd('/dgt I am Manual Tanking!')
    mq.cmd('/cwtns mode 0')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
end

local function cwtnaction()
    mq.cmd('/dgt I am CWTN Stopping Attack!')
    mq.cmd('/boxr Pause')
    mq.cmd('/cwtns mode 0')
    mq.cmd('/attack off')
    mq.cmd('/keypress esc')
end

local actions = {
    BRD = brdaction,
    RNG = kaaction,
    WIZ = kaaction,
    PAL = tankaction,
    SHD = tankaction,
    WAR = tankaction,
    BER = cwtnaction,
    BST = cwtnaction,
    ENC = cwtnaction,
    MAG = cwtnaction,
    MNK = cwtnaction,
    NEC = cwtnaction,
    ROG = cwtnaction,       
}

local function event_handler()
    return actions[my_class]()
end

return {eventfunc=event_handler}